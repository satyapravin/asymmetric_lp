# Trading System Configuration
# This file defines the process architecture and ZMQ communication endpoints

[GLOBAL]
# System-wide settings
LOG_LEVEL=INFO
CONFIG_VERSION=1.0
ENVIRONMENT=production

# Process management
TRADER_PROCESS_NAME=trading_strategy
QUOTE_SERVER_PROCESS_NAME=quote_server
POSITION_SERVER_PROCESS_NAME=position_server
TRADING_ENGINE_PROCESS_NAME=trading_engine

# Exchange configuration
EXCHANGES=BINANCE,DERIBIT,GRVT
ENABLED_EXCHANGES=BINANCE,DERIBIT,GRVT

# ZMQ Configuration
ZMQ_CONTEXT_THREADS=4
ZMQ_IO_THREADS=4
ZMQ_MAX_SOCKETS=1024

# =============================================================================
# TRADER PROCESS CONFIGURATION
# =============================================================================
[TRADER]
# Trader process settings
PROCESS_NAME=trading_strategy
PID_FILE=/tmp/trader.pid
LOG_FILE=/var/log/trading/trader.log

# Strategy configuration
STRATEGY_TYPE=market_making
STRATEGY_CONFIG_FILE=config/strategy_config.json

# ZMQ Publisher endpoints (trader publishes to)
MARKET_DATA_PUB_ENDPOINT=tcp://127.0.0.1:6001
ORDER_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6002
POSITION_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6003
STRATEGY_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6004

# ZMQ Subscriber endpoints (trader subscribes to)
QUOTE_SERVER_SUB_ENDPOINT=tcp://127.0.0.1:7001
POSITION_SERVER_SUB_ENDPOINT=tcp://127.0.0.1:7002
TRADING_ENGINE_SUB_ENDPOINT=tcp://127.0.0.1:7003

# =============================================================================
# QUOTE SERVER CONFIGURATION (Per Exchange)
# =============================================================================
[QUOTE_SERVER_BINANCE]
PROCESS_NAME=quote_server_binance
EXCHANGE=BINANCE
PID_FILE=/tmp/quote_server_binance.pid
LOG_FILE=/var/log/trading/quote_server_binance.log

# Exchange-specific settings
ASSET_TYPE=futures
API_KEY=your_binance_api_key
API_SECRET=your_binance_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints (quote server publishes to)
MARKET_DATA_PUB_ENDPOINT=tcp://127.0.0.1:6001
ORDERBOOK_PUB_ENDPOINT=tcp://127.0.0.1:6005
TICKER_PUB_ENDPOINT=tcp://127.0.0.1:6006

# ZMQ Subscriber endpoints (quote server subscribes to)
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7001

# WebSocket configuration
WS_PUBLIC_URL=wss://fstream.binance.com/ws
WS_PRIVATE_URL=wss://fstream.binance.com/ws
WS_RECONNECT_INTERVAL=5000
WS_PING_INTERVAL=30000

[QUOTE_SERVER_DERIBIT]
PROCESS_NAME=quote_server_deribit
EXCHANGE=DERIBIT
PID_FILE=/tmp/quote_server_deribit.pid
LOG_FILE=/var/log/trading/quote_server_deribit.log

# Exchange-specific settings
ASSET_TYPE=options
API_KEY=your_deribit_api_key
API_SECRET=your_deribit_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints
MARKET_DATA_PUB_ENDPOINT=tcp://127.0.0.1:6001
ORDERBOOK_PUB_ENDPOINT=tcp://127.0.0.1:6007
TICKER_PUB_ENDPOINT=tcp://127.0.0.1:6008

# ZMQ Subscriber endpoints
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7001

# WebSocket configuration
WS_PUBLIC_URL=wss://www.deribit.com/ws/api/v2
WS_PRIVATE_URL=wss://www.deribit.com/ws/api/v2
WS_RECONNECT_INTERVAL=5000
WS_PING_INTERVAL=30000

[QUOTE_SERVER_GRVT]
PROCESS_NAME=quote_server_grvt
EXCHANGE=GRVT
PID_FILE=/tmp/quote_server_grvt.pid
LOG_FILE=/var/log/trading/quote_server_grvt.log

# Exchange-specific settings
ASSET_TYPE=perpetual
API_KEY=your_grvt_api_key
API_SECRET=your_grvt_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints
MARKET_DATA_PUB_ENDPOINT=tcp://127.0.0.1:6001
ORDERBOOK_PUB_ENDPOINT=tcp://127.0.0.1:6009
TICKER_PUB_ENDPOINT=tcp://127.0.0.1:6010

# ZMQ Subscriber endpoints
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7001

# WebSocket configuration
WS_PUBLIC_URL=wss://api.grvt.io/ws
WS_PRIVATE_URL=wss://api.grvt.io/ws
WS_RECONNECT_INTERVAL=5000
WS_PING_INTERVAL=30000

# =============================================================================
# POSITION SERVER CONFIGURATION (Per Exchange)
# =============================================================================
[POSITION_SERVER_BINANCE]
PROCESS_NAME=position_server_binance
EXCHANGE=BINANCE
PID_FILE=/tmp/position_server_binance.pid
LOG_FILE=/var/log/trading/position_server_binance.log

# Exchange-specific settings
ASSET_TYPE=futures
API_KEY=your_binance_api_key
API_SECRET=your_binance_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints (position server publishes to)
POSITION_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6003
BALANCE_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6011
PNL_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6012

# ZMQ Subscriber endpoints (position server subscribes to)
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7002
TRADING_ENGINE_SUB_ENDPOINT=tcp://127.0.0.1:7004

# Position update interval (milliseconds)
POSITION_UPDATE_INTERVAL=1000
BALANCE_UPDATE_INTERVAL=5000

[POSITION_SERVER_DERIBIT]
PROCESS_NAME=position_server_deribit
EXCHANGE=DERIBIT
PID_FILE=/tmp/position_server_deribit.pid
LOG_FILE=/var/log/trading/position_server_deribit.log

# Exchange-specific settings
ASSET_TYPE=options
API_KEY=your_deribit_api_key
API_SECRET=your_deribit_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints
POSITION_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6003
BALANCE_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6013
PNL_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6014

# ZMQ Subscriber endpoints
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7002
TRADING_ENGINE_SUB_ENDPOINT=tcp://127.0.0.1:7005

# Position update interval
POSITION_UPDATE_INTERVAL=1000
BALANCE_UPDATE_INTERVAL=5000

[POSITION_SERVER_GRVT]
PROCESS_NAME=position_server_grvt
EXCHANGE=GRVT
PID_FILE=/tmp/position_server_grvt.pid
LOG_FILE=/var/log/trading/position_server_grvt.log

# Exchange-specific settings
ASSET_TYPE=perpetual
API_KEY=your_grvt_api_key
API_SECRET=your_grvt_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints
POSITION_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6003
BALANCE_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6015
PNL_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6016

# ZMQ Subscriber endpoints
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7002
TRADING_ENGINE_SUB_ENDPOINT=tcp://127.0.0.1:7006

# Position update interval
POSITION_UPDATE_INTERVAL=1000
BALANCE_UPDATE_INTERVAL=5000

# =============================================================================
# TRADING ENGINE CONFIGURATION (Per Exchange)
# =============================================================================
[TRADING_ENGINE_BINANCE]
PROCESS_NAME=trading_engine_binance
EXCHANGE=BINANCE
PID_FILE=/tmp/trading_engine_binance.pid
LOG_FILE=/var/log/trading/trading_engine_binance.log

# Exchange-specific settings
ASSET_TYPE=futures
API_KEY=your_binance_api_key
API_SECRET=your_binance_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints (trading engine publishes to)
ORDER_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6002
TRADE_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6017
ORDER_STATUS_PUB_ENDPOINT=tcp://127.0.0.1:6018

# ZMQ Subscriber endpoints (trading engine subscribes to)
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7003
POSITION_SERVER_SUB_ENDPOINT=tcp://127.0.0.1:7004

# Order management settings
MAX_ORDERS_PER_SECOND=10
ORDER_TIMEOUT_MS=5000
RETRY_FAILED_ORDERS=true
MAX_ORDER_RETRIES=3

# WebSocket configuration for order updates
WS_PRIVATE_URL=wss://fstream.binance.com/ws
WS_RECONNECT_INTERVAL=5000
WS_PING_INTERVAL=30000

[TRADING_ENGINE_DERIBIT]
PROCESS_NAME=trading_engine_deribit
EXCHANGE=DERIBIT
PID_FILE=/tmp/trading_engine_deribit.pid
LOG_FILE=/var/log/trading/trading_engine_deribit.log

# Exchange-specific settings
ASSET_TYPE=options
API_KEY=your_deribit_api_key
API_SECRET=your_deribit_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints
ORDER_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6002
TRADE_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6019
ORDER_STATUS_PUB_ENDPOINT=tcp://127.0.0.1:6020

# ZMQ Subscriber endpoints
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7003
POSITION_SERVER_SUB_ENDPOINT=tcp://127.0.0.1:7005

# Order management settings
MAX_ORDERS_PER_SECOND=10
ORDER_TIMEOUT_MS=5000
RETRY_FAILED_ORDERS=true
MAX_ORDER_RETRIES=3

# WebSocket configuration
WS_PRIVATE_URL=wss://www.deribit.com/ws/api/v2
WS_RECONNECT_INTERVAL=5000
WS_PING_INTERVAL=30000

[TRADING_ENGINE_GRVT]
PROCESS_NAME=trading_engine_grvt
EXCHANGE=GRVT
PID_FILE=/tmp/trading_engine_grvt.pid
LOG_FILE=/var/log/trading/trading_engine_grvt.log

# Exchange-specific settings
ASSET_TYPE=perpetual
API_KEY=your_grvt_api_key
API_SECRET=your_grvt_api_secret
TESTNET_MODE=false

# ZMQ Publisher endpoints
ORDER_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6002
TRADE_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6021
ORDER_STATUS_PUB_ENDPOINT=tcp://127.0.0.1:6022

# ZMQ Subscriber endpoints
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7003
POSITION_SERVER_SUB_ENDPOINT=tcp://127.0.0.1:7006

# Order management settings
MAX_ORDERS_PER_SECOND=10
ORDER_TIMEOUT_MS=5000
RETRY_FAILED_ORDERS=true
MAX_ORDER_RETRIES=3

# WebSocket configuration
WS_PRIVATE_URL=wss://api.grvt.io/ws
WS_RECONNECT_INTERVAL=5000
WS_PING_INTERVAL=30000

# =============================================================================
# PROCESS MANAGEMENT
# =============================================================================
[PROCESS_MANAGER]
# Process management settings
AUTO_RESTART=true
MAX_RESTART_ATTEMPTS=5
RESTART_DELAY_MS=5000
HEALTH_CHECK_INTERVAL_MS=10000
PROCESS_TIMEOUT_MS=30000

# Process startup order
STARTUP_ORDER=quote_server,position_server,trading_engine,trader
SHUTDOWN_ORDER=trader,trading_engine,position_server,quote_server

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=8080
METRICS_ENDPOINT=/metrics

# Logging
LOG_ROTATION_SIZE_MB=100
LOG_RETENTION_DAYS=30
LOG_FORMAT=json
