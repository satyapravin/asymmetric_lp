# Binance Trading Engine Configuration
# This file configures the Binance trading engine

[GLOBAL]
PROCESS_NAME=trading_engine_binance
EXCHANGE_NAME=BINANCE
LOG_LEVEL=INFO
CONFIG_VERSION=1.0
ENVIRONMENT=production

# Process management
PID_FILE=/tmp/trading_engine_binance.pid
LOG_FILE=/var/log/trading/trading_engine_binance.log
LOG_ROTATION_SIZE_MB=100
LOG_RETENTION_DAYS=30

# Exchange-specific settings
ASSET_TYPE=futures
API_KEY=your_binance_api_key
API_SECRET=your_binance_api_secret
TESTNET_MODE=false

# =============================================================================
# ZMQ PUBLISHER ENDPOINTS (Trading engine publishes to)
# =============================================================================
[PUBLISHERS]
# Order events published to trader
ORDER_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6002

# Trade events published to analytics
TRADE_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6017

# Order status updates published to monitoring
ORDER_STATUS_PUB_ENDPOINT=tcp://127.0.0.1:6018

# =============================================================================
# ZMQ SUBSCRIBER ENDPOINTS (Trading engine subscribes to)
# =============================================================================
[SUBSCRIBERS]
# Order requests from trader
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7003

# Position updates from position server
POSITION_SERVER_SUB_ENDPOINT=tcp://127.0.0.1:7004

# =============================================================================
# ORDER MANAGEMENT
# =============================================================================
[ORDER_MANAGEMENT]
# Rate limiting (Binance specific limits)
MAX_ORDERS_PER_SECOND=10
MAX_ORDERS_PER_MINUTE=1200
MAX_ORDERS_PER_HOUR=72000

# Order timeout and retry settings
ORDER_TIMEOUT_MS=5000
RETRY_FAILED_ORDERS=true
MAX_ORDER_RETRIES=3
RETRY_DELAY_MS=1000

# Order validation
VALIDATE_ORDER_SIZE=true
MIN_ORDER_SIZE=0.001
MAX_ORDER_SIZE=1000.0
VALIDATE_PRICE_RANGE=true
PRICE_TOLERANCE_PERCENT=0.1

# Order queue management
MAX_PENDING_ORDERS=1000
ORDER_QUEUE_TIMEOUT_MS=10000
PRIORITY_ORDER_TIMEOUT_MS=1000

# =============================================================================
# HTTP API CONFIGURATION
# =============================================================================
[HTTP_API]
# HTTP API settings
HTTP_BASE_URL=https://fapi.binance.com
HTTP_TIMEOUT_MS=5000
HTTP_MAX_RETRIES=3
HTTP_RETRY_DELAY_MS=1000

# API rate limiting (Binance specific)
API_REQUESTS_PER_SECOND=10
API_REQUESTS_PER_MINUTE=1200
API_BURST_LIMIT=20

# Authentication
AUTH_METHOD=HMAC_SHA256
SIGNATURE_TIMESTAMP_TOLERANCE_MS=5000
REFRESH_CREDENTIALS_INTERVAL_MS=3600000

# =============================================================================
# WEBSOCKET CONFIGURATION (Private Channels Only)
# =============================================================================
[WEBSOCKET]
# Private WebSocket URLs for order updates and account data
WS_PRIVATE_URL=wss://fstream.binance.com/ws
WS_PRIVATE_BACKUP_URL=wss://fstream.binance.com/ws

# Connection settings
WS_RECONNECT_INTERVAL_MS=5000
WS_PING_INTERVAL_MS=30000
WS_PONG_TIMEOUT_MS=10000
WS_MAX_RECONNECT_ATTEMPTS=10
WS_CONNECTION_TIMEOUT_MS=10000

# Message handling
WS_MAX_MESSAGE_SIZE_KB=1024
WS_MESSAGE_BUFFER_SIZE=10000
WS_PROCESSING_THREADS=2

# Private channel subscriptions
ENABLE_PRIVATE_WEBSOCKET=true
PRIVATE_CHANNELS=order_update,account_update,balance_update,trade_update


# =============================================================================
# RISK MANAGEMENT
# =============================================================================
[RISK_MANAGEMENT]
# Position limits
MAX_POSITION_SIZE=10.0
MAX_POSITION_PER_SYMBOL=5.0
POSITION_CHECK_INTERVAL_MS=1000

# Order limits
MAX_ORDER_VALUE=10000.0
MAX_DAILY_ORDER_VALUE=100000.0
MAX_DAILY_ORDER_COUNT=10000

# Risk checks
ENABLE_PRE_TRADE_CHECKS=true
ENABLE_POST_TRADE_CHECKS=true
RISK_CHECK_TIMEOUT_MS=100

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
[PERFORMANCE]
# Threading
MAX_WORKER_THREADS=4
ORDER_PROCESSING_THREADS=2
WEBSOCKET_THREADS=2

# Message processing
MAX_MESSAGE_QUEUE_SIZE=10000
MESSAGE_PROCESSING_TIMEOUT_MS=100
BATCH_PROCESSING_SIZE=100

# Memory management
MAX_MEMORY_USAGE_MB=512
GC_INTERVAL_MS=5000
ORDER_HISTORY_RETENTION_HOURS=24

# =============================================================================
# MONITORING AND METRICS
# =============================================================================
[MONITORING]
ENABLE_METRICS=true
METRICS_PORT=8082
METRICS_ENDPOINT=/metrics
HEALTH_CHECK_INTERVAL_MS=5000
PERFORMANCE_REPORT_INTERVAL_MS=60000

# Order metrics
TRACK_ORDER_COUNT=true
TRACK_ORDER_LATENCY=true
TRACK_ORDER_SUCCESS_RATE=true
TRACK_TRADE_COUNT=true

# Alerting
ENABLE_ALERTS=true
ALERT_EMAIL=tradingengine@company.com
ALERT_THRESHOLDS=order_rejection_rate_high,high_latency,connection_lost,rate_limit_exceeded
