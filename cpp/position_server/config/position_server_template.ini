# Position Server Configuration Template
# This file configures a position server for a specific exchange
# Copy this file and rename to position_server_<EXCHANGE>.ini

[GLOBAL]
PROCESS_NAME=position_server
EXCHANGE_NAME=BINANCE
LOG_LEVEL=INFO
CONFIG_VERSION=1.0
ENVIRONMENT=production

# Process management
PID_FILE=/tmp/position_server_BINANCE.pid
LOG_FILE=/var/log/trading/position_server_BINANCE.log
LOG_ROTATION_SIZE_MB=100
LOG_RETENTION_DAYS=30

# Exchange-specific settings
ASSET_TYPE=futures
API_KEY=your_binance_api_key
API_SECRET=your_binance_api_secret
TESTNET_MODE=false

# =============================================================================
# ZMQ PUBLISHER ENDPOINTS (Position server publishes to)
# =============================================================================
[PUBLISHERS]
# Position events published to trader
POSITION_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6003

# Balance events published to monitoring
BALANCE_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6011

# PnL events published to analytics
PNL_EVENTS_PUB_ENDPOINT=tcp://127.0.0.1:6012

# =============================================================================
# ZMQ SUBSCRIBER ENDPOINTS (Position server subscribes to)
# =============================================================================
[SUBSCRIBERS]
# Commands from trader
TRADER_SUB_ENDPOINT=tcp://127.0.0.1:7002

# Trade updates from trading engine
TRADING_ENGINE_SUB_ENDPOINT=tcp://127.0.0.1:7004

# =============================================================================
# POSITION MANAGEMENT
# =============================================================================
[POSITION_MANAGEMENT]
# Position update intervals
POSITION_UPDATE_INTERVAL_MS=1000
BALANCE_UPDATE_INTERVAL_MS=5000
PNL_CALCULATION_INTERVAL_MS=1000

# Position tracking
TRACK_ALL_POSITIONS=true
TRACK_POSITION_HISTORY=true
POSITION_HISTORY_RETENTION_HOURS=24

# Position validation
VALIDATE_POSITION_DATA=true
POSITION_TOLERANCE_PERCENT=0.01
MAX_POSITION_DISCREPANCY=0.1

# =============================================================================
# RISK MANAGEMENT
# =============================================================================
[RISK_MANAGEMENT]
# Position limits
MAX_POSITION_SIZE=10.0
MAX_POSITION_PER_SYMBOL=5.0
MAX_TOTAL_EXPOSURE=100.0

# Balance limits
MIN_BALANCE_THRESHOLD=1000.0
MAX_BALANCE_THRESHOLD=100000.0
BALANCE_WARNING_THRESHOLD=5000.0

# PnL limits
MAX_DAILY_LOSS=5000.0
MAX_UNREALIZED_LOSS=2000.0
PNL_WARNING_THRESHOLD=1000.0

# Risk checks
ENABLE_POSITION_CHECKS=true
ENABLE_BALANCE_CHECKS=true
ENABLE_PNL_CHECKS=true
RISK_CHECK_TIMEOUT_MS=100

# =============================================================================
# DATA PROCESSING
# =============================================================================
[DATA_PROCESSING]
# Data validation
VALIDATE_POSITION_DATA=true
VALIDATE_BALANCE_DATA=true
VALIDATE_TRADE_DATA=true

# Data filtering
FILTER_DUPLICATE_POSITIONS=true
FILTER_STALE_POSITIONS=true
STALE_POSITION_THRESHOLD_MS=10000

# Data transformation
NORMALIZE_POSITION_DATA=true
CONVERT_PRICE_TO_DOUBLE=true
CONVERT_QTY_TO_DOUBLE=true

# =============================================================================
# PERFORMANCE SETTINGS
# =============================================================================
[PERFORMANCE]
# Threading
MAX_WORKER_THREADS=4
POSITION_PROCESSING_THREADS=2
DATA_PROCESSING_THREADS=2

# Message processing
MAX_MESSAGE_QUEUE_SIZE=10000
MESSAGE_PROCESSING_TIMEOUT_MS=100
BATCH_PROCESSING_SIZE=100

# Memory management
MAX_MEMORY_USAGE_MB=512
GC_INTERVAL_MS=5000
DATA_RETENTION_HOURS=24

# =============================================================================
# MONITORING AND METRICS
# =============================================================================
[MONITORING]
ENABLE_METRICS=true
METRICS_PORT=8083
METRICS_ENDPOINT=/metrics
HEALTH_CHECK_INTERVAL_MS=5000
PERFORMANCE_REPORT_INTERVAL_MS=60000

# Position metrics
TRACK_POSITION_COUNT=true
TRACK_POSITION_CHANGES=true
TRACK_BALANCE_CHANGES=true
TRACK_PNL_CHANGES=true

# Alerting
ENABLE_ALERTS=true
ALERT_EMAIL=positionserver@company.com
ALERT_THRESHOLDS=position_limit_exceeded,balance_low,high_loss,data_stale
